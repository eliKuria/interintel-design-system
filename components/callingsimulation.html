<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calling Animation</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Use Inter font from a previous design -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
     <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.4/css/bulma.min.css">
    <link rel="stylesheet" href="../styles/tokens.css">
    <link rel="stylesheet" href="../styles/bulma-overrides.css">
</head>
<body class="p-4">
    <!-- Overall container to hold the timer and the main call view -->
    <div class="w-full max-w-2xl">
        <!-- Top timer and status bar, now with a border and shadow -->
        <div class="flex items-center space-x-2 rounded-md px-4 py-2 shadow-md mb-2 timer-card">
            <div class="w-2 h-2 bg-red-500 rounded-full animate-pulse"></div>
            <span id="timer" class="text-sm font-medium text-gray-700">0 min 00 sec</span>
        </div>
    
        <!-- Main container with the pulsing border -->
        <div class="calling-container">
            <!-- The central "Me" circle with a pulsating visualizer -->
            <div class="user-circle bg-gray-100 text-gray-800">
                <!-- The pulsating ring for the "talking" effect -->
                <div id="me-visualizer-ring" class="visualizer-ring opacity-0" style="border-color: var(--md-sys-color-primary-light);"></div>
                Me
            </div>

            <!-- Client's small video container in the corner -->
            <div class="client-view">
                <div class="client-circle bg-gray-900 text-white mb-1">
                    Client
                    <!-- The pulsating ring for the client's "talking" effect -->
                    <div id="client-visualizer-ring" class="visualizer-ring opacity-0" style="border-color: var(--md-sys-color-secondary-light);"></div>
                    <!-- Mute icon, positioned correctly over the client circle -->
                    <div class="absolute bottom-0 right-0 p-1 rounded-full" style="background-color: var(--md-sys-color-on-surface-variant-light);">
                        <svg class="w-4 h-4 text-white" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M12 14c1.66 0 2.99-1.34 2.99-3L15 5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3zm5.3-2.99c0 3.53-2.64 6.4-6.19 6.75v3.24h-1.6v-3.24c-3.55-.35-6.19-3.22-6.19-6.75h2.01c0 2.94 2.36 5.34 5.3 5.34s5.3-2.4 5.3-5.34h2.01z"/>
                        </svg>
                    </div>
                </div>
                <span class="text-xs text-gray-500">Jane Smith</span>
            </div>
        </div>
    </div>

    <script>
        const timerElement = document.getElementById('timer');
        let seconds = 0;
        let minutes = 0;

        function updateTimer() {
            seconds++;
            if (seconds === 60) {
                minutes++;
                seconds = 0;
            }
            const formattedSeconds = seconds < 10 ? `0${seconds}` : seconds;
            const formattedMinutes = minutes < 10 ? `0${minutes}` : minutes;
            timerElement.textContent = `${formattedMinutes} min ${formattedSeconds} sec`;
        }

        // Start the timer
        setInterval(updateTimer, 1000);

        // Get the visualizer rings
        const meRing = document.getElementById('me-visualizer-ring');
        const clientRing = document.getElementById('client-visualizer-ring');
        
        // This function simulates a back-and-forth conversation
        function simulateConversation() {
            // First, "Me" talks
            meRing.classList.add('is-talking');
            meRing.style.opacity = '1';
            
            // After 3 seconds, "Me" stops talking and "Client" starts
            setTimeout(() => {
                meRing.classList.remove('is-talking');
                meRing.style.opacity = '0';
                
                clientRing.classList.add('is-talking');
                clientRing.style.opacity = '1';
                
                // After another 3 seconds, "Client" stops talking and the cycle repeats
                setTimeout(() => {
                    clientRing.classList.remove('is-talking');
                    clientRing.style.opacity = '0';
                    simulateConversation(); // Restart the conversation
                }, 3000);
            }, 3000);
        }
        
        // Start the conversation simulation
        simulateConversation();
    </script>
</body>
</html>
